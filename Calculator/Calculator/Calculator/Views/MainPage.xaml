<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:Calculator.ViewModels"
             x:Class="Calculator.MainPage">

    <ContentPage.BindingContext>
        <vm:CalculatorViewModel />
    </ContentPage.BindingContext>

    <!-- Full-page grid, no vertical stack-->
    <Grid RowSpacing="0" ColumnSpacing="0"
          VerticalOptions="FillAndExpand"
          HorizontalOptions="FillAndExpand">

        <!-- Row 0: Header (Auto height) -->
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <!-- For Home label -->
            <RowDefinition Height="Auto" />
            <!-- For Preview/Result labels -->
            <RowDefinition Height="*" />
            <!-- Calculator button grid fills rest -->
        </Grid.RowDefinitions>

        <!-- Header/Home -->
        <Label Text=""
               FontSize="20"
               VerticalOptions="Start"
               HorizontalOptions="Start"
               Margin="10,5,0,0"
               Grid.Row="0"/>

        <!-- Display stack (Preview & Result) -->
        <VerticalStackLayout Grid.Row="1"
                             Padding="4,0,4,0"
                             Spacing="2">
            <Label Text="{Binding PreviewText}"
                   FontSize="20"
                   HorizontalTextAlignment="End"
                   VerticalOptions="Start"
                   HorizontalOptions="FillAndExpand"/>
            <Label Text="{Binding ResultText}"
                   FontSize="36" FontAttributes="Bold"
                   HorizontalTextAlignment="End"
                   VerticalOptions="Start"
                   HorizontalOptions="FillAndExpand"/>
        </VerticalStackLayout>

        <!-- Calculator Grid -->
        <Grid Grid.Row="2"
              Padding="0"
              RowSpacing="6" ColumnSpacing="6"
              VerticalOptions="FillAndExpand"
              HorizontalOptions="FillAndExpand">

            <Grid.RowDefinitions>
                <RowDefinition Height="*" />
                <RowDefinition Height="*" />
                <RowDefinition Height="*" />
                <RowDefinition Height="*" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <!-- Buttons: same as before -->
            <Button Text="AC" Grid.Row="0" Grid.Column="0" BackgroundColor="#9C27B0" TextColor="White" FontSize="24" CornerRadius="12" Clicked="OnClearClicked"/>
            <Button Text="1/x" Grid.Row="0" Grid.Column="1" BackgroundColor="#00897B" TextColor="White" FontSize="24" CornerRadius="12" Clicked="OnReciprocalClicked"/>
            <Button Text="%" Grid.Row="0" Grid.Column="2" BackgroundColor="#00897B" TextColor="White" FontSize="24" CornerRadius="12" Clicked="OnPercentClicked"/>
            <Button Text="/" Grid.Row="0" Grid.Column="3" BackgroundColor="#00897B" TextColor="White" FontSize="24" CornerRadius="12" Clicked="OnOperatorClicked"/>
            <Button Text="7" Grid.Row="1" Grid.Column="0" BackgroundColor="#5B28DD" TextColor="White" FontSize="28" CornerRadius="12" Clicked="OnNumberClicked"/>
            <Button Text="8" Grid.Row="1" Grid.Column="1" BackgroundColor="#5B28DD" TextColor="White" FontSize="28" CornerRadius="12" Clicked="OnNumberClicked"/>
            <Button Text="9" Grid.Row="1" Grid.Column="2" BackgroundColor="#5B28DD" TextColor="White" FontSize="28" CornerRadius="12" Clicked="OnNumberClicked"/>
            <Button Text="*" Grid.Row="1" Grid.Column="3" BackgroundColor="#00897B" TextColor="White" FontSize="24" CornerRadius="12" Clicked="OnOperatorClicked"/>
            <Button Text="4" Grid.Row="2" Grid.Column="0" BackgroundColor="#5B28DD" TextColor="White" FontSize="28" CornerRadius="12" Clicked="OnNumberClicked"/>
            <Button Text="5" Grid.Row="2" Grid.Column="1" BackgroundColor="#5B28DD" TextColor="White" FontSize="28" CornerRadius="12" Clicked="OnNumberClicked"/>
            <Button Text="6" Grid.Row="2" Grid.Column="2" BackgroundColor="#5B28DD" TextColor="White" FontSize="28" CornerRadius="12" Clicked="OnNumberClicked"/>
            <Button Text="-" Grid.Row="2" Grid.Column="3" BackgroundColor="#00897B" TextColor="White" FontSize="24" CornerRadius="12" Clicked="OnOperatorClicked"/>
            <Button Text="1" Grid.Row="3" Grid.Column="0" BackgroundColor="#5B28DD" TextColor="White" FontSize="28" CornerRadius="12" Clicked="OnNumberClicked"/>
            <Button Text="2" Grid.Row="3" Grid.Column="1" BackgroundColor="#5B28DD" TextColor="White" FontSize="28" CornerRadius="12" Clicked="OnNumberClicked"/>
            <Button Text="3" Grid.Row="3" Grid.Column="2" BackgroundColor="#5B28DD" TextColor="White" FontSize="28" CornerRadius="12" Clicked="OnNumberClicked"/>
            <Button Text="+" Grid.Row="3" Grid.Column="3" BackgroundColor="#00897B" TextColor="White" FontSize="24" CornerRadius="12" Clicked="OnOperatorClicked"/>
            <Button Text="+/-" Grid.Row="4" Grid.Column="0" BackgroundColor="#9C27B0" TextColor="White" FontSize="24" CornerRadius="12" Clicked="OnNegateClicked"/>
            <Button Text="0" Grid.Row="4" Grid.Column="1" BackgroundColor="#5B28DD" TextColor="White" FontSize="28" CornerRadius="12" Clicked="OnNumberClicked"/>
            <Button Text="." Grid.Row="4" Grid.Column="2" BackgroundColor="#5B28DD" TextColor="White" FontSize="28" CornerRadius="12" Clicked="OnDecimalClicked"/>
            <Button Text="=" Grid.Row="4" Grid.Column="3" BackgroundColor="#D32F2F" TextColor="White" FontSize="28" CornerRadius="12" FontAttributes="Bold" Clicked="OnEqualClicked"/>
        </Grid>
    </Grid>
</ContentPage>
